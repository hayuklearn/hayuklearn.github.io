import{_ as s,c as i,o as t,R as a}from"./chunks/framework.D6kTAKe3.js";const g=JSON.parse('{"title":"Android 命令行工具","description":"","frontmatter":{},"headers":[],"relativePath":"Android/ADB/ADB.md","filePath":"Android/ADB/ADB.md"}'),e={name:"Android/ADB/ADB.md"},l=a(`<p>[TOC]</p><h1 id="android-命令行工具" tabindex="-1">Android 命令行工具 <a class="header-anchor" href="#android-命令行工具" aria-label="Permalink to &quot;Android 命令行工具&quot;">​</a></h1><div class="language-bat vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// adb 连接不上时</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">netstat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -aon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> findstr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;5307&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// 找到占用 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5307</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 端口的进程 ID，比如 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13440</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">taskkill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /pid </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13440</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /f</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// 杀死该进程</span></span></code></pre></div><h2 id="adb-shell" tabindex="-1">adb shell <a class="header-anchor" href="#adb-shell" aria-label="Permalink to &quot;adb shell&quot;">​</a></h2><ul><li>adb shell</li><li>adb devices</li><li>adb -s [device-name] shell</li></ul><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">命令</th></tr></thead><tbody><tr><td style="text-align:center;">Android 12 及以下，显示当前界面类名</td><td style="text-align:center;">adb shell dumpsys activity</td></tr><tr><td style="text-align:center;">Android 13 及以上，显示当前界面类名</td><td style="text-align:center;">adb shell dumpsys activity</td></tr><tr><td style="text-align:center;">查看 Activity 组件信息</td><td style="text-align:center;">adb shell dumpsys activity activities</td></tr><tr><td style="text-align:center;">查看 Service 组件信息</td><td style="text-align:center;">adb shell dumpsys activity services</td></tr><tr><td style="text-align:center;">查看 ContentProvider 组件信息</td><td style="text-align:center;">adb shell dumpsys activity providers</td></tr><tr><td style="text-align:center;">查看 BroadcastReceiver 信息</td><td style="text-align:center;">adb shell dumpsys activity broadcasts</td></tr><tr><td style="text-align:center;">查看 Intent 信息</td><td style="text-align:center;">adb shell dumpsys activity intents</td></tr><tr><td style="text-align:center;">查看进程信息</td><td style="text-align:center;">adb shell dumpsys activity processes</td></tr><tr><td style="text-align:center;">查看运行中的服务</td><td style="text-align:center;">adb shell dumpsys activity services</td></tr><tr><td style="text-align:center;">查看存储空间情况</td><td style="text-align:center;">adb shell df</td></tr><tr><td style="text-align:center;">浏览器打开页面</td><td style="text-align:center;">adb shell am start -a android.intent.action.VIEW -d &quot;<a href="http://192.168.101.4/get_data.xml" target="_blank" rel="noreferrer">http://192.168.101.4/get_data.xml</a>&quot;</td></tr></tbody></table><h2 id="连接-wifi" tabindex="-1">连接 WiFi <a class="header-anchor" href="#连接-wifi" aria-label="Permalink to &quot;连接 WiFi&quot;">​</a></h2><ol><li>开启网络 ADB 调试</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcpip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5555</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setprop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service.adb.tcp.port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5555</span></span></code></pre></div><ol start="2"><li>连接</li></ol><ul><li>adb connect 192.168.20.162:5555</li></ul><h2 id="emulator" tabindex="-1">emulator <a class="header-anchor" href="#emulator" aria-label="Permalink to &quot;emulator&quot;">​</a></h2><ul><li>emulator @emalator-name</li></ul><blockquote><p>启动模拟器 e.g. emulator @GalaxyNexusAPI21</p></blockquote><h2 id="screen" tabindex="-1">screen <a class="header-anchor" href="#screen" aria-label="Permalink to &quot;screen&quot;">​</a></h2><ol><li><p>获取 Android 设备屏幕分辨率 adb shell wm size</p></li><li><p>获取 Android 设备屏幕密度 adb shell wm density</p></li><li><p>修改屏幕像素密度 adb shell wm resize 1920*1080 adb shell wm size 540x960</p></li><li><p>重置屏幕尺寸大小 adb shell wm size reset</p></li><li><p>设置屏幕 dpi（常用的 dpi 有 160 mdpi, 240 hdpi, 320 xhdpi, 480 xxhdpi） adb shell wm density 320</p></li><li><p>重置可用 dpi 如下命令 adb shell wm density reset</p></li><li><p>录屏 adb shell screenrecord sdcard/test01.mp4 adb pull sdcard/test01.mp4</p></li><li><p>截屏 adb shell screencap -p sdcard/screen.png adb pull sdcard/screen.png</p></li><li><p>是否允许旋转屏幕</p></li></ol><ul><li>set</li></ul><p>adb shell content insert --uri content://settings/system --bind name:s:accelerometer_rotation --bind value:i:1 // 0 - 禁止 1 - 允许 或 adb shell settings put system accelerometer_rotation 1</p><p>adb shell content insert --uri content://settings/system --bind name:s:user_rotation --bind value:i:1 // 0 - 3 或 adb shell settings put system user_rotation 1</p><ul><li>get</li></ul><p>adb shell settings get system accelerometer_rotation # 0 - 不支持旋转 1 - 支持旋转 adb shell settings get system user_rotation # 0 - 竖屏 1 - 横屏</p><h2 id="其它" tabindex="-1">其它 <a class="header-anchor" href="#其它" aria-label="Permalink to &quot;其它&quot;">​</a></h2><ol start="9"><li><p>输入文字 adb shell input text &quot;blabla&quot;</p></li><li><p>文件传输 adb pull sdcard/xxx adb push local-target-file sdcard/xxx</p></li><li><p>启动 APP $ adb shell am start -n &quot;com.xxx.intelligent.uat/com.xxx.retail.ui.activity.GuideActivity&quot; -a android.intent.action.MAIN -c android.intent.category.LAUNCHER</p></li><li><p>导出 APK</p></li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.DeviceTest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 是我要导出的</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> APP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 包名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.DeviceTest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> APP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 在手机中的存放路径：/system/priv-app/DeviceTest/DeviceTest.apk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> APP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 导出的目标</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 在</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 端的存放路径：C:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dministrator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">esktop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">adb </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system/priv-app/DeviceTest/DeviceTest.apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dministrator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">esktop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span></code></pre></div><ol start="13"><li>logcat 查看日志</li></ol><p>adb shell &quot;ps | grep com.xxx.intelligent&quot; - 查看进程号 adb logcat | grep 进程号</p><ol start="14"><li>跳转桌面</li></ol><p>adb shell input keyevent 3</p><ol start="15"><li>监听屏幕点击</li></ol><p>adb shell getevent | grep -e &quot;0035&quot; -e &quot;0036&quot;</p><ol start="16"><li>查看架构</li></ol><p>adb shell getprop ro.product.cpu.abi</p><ol start="17"><li>杀死 app</li></ol><p>adb shell am force-stop cn.xxx.facepay</p><ol start="18"><li>查看 app 占用运行内存</li></ol><p>adb shell dumpsys meminfo cn.xxx.facepay</p><ol start="19"><li>查看 app version name</li></ol><p>adb shell &quot;dumpsys package $packageName | grep versionName&quot;</p>`,39),n=[l];function p(h,d,r,k,o,c){return t(),i("div",null,n)}const y=s(e,[["render",p]]);export{g as __pageData,y as default};
